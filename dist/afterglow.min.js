!function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<s.length;o++)if((i=s[o])===t||i.fn===t){s.splice(o,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var s=0,o=(i=i.slice(0)).length;s<o;++s)i[s].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,i){"use strict";i.r(t);var s=
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */
class{isYoutubePlayer(e){return e.hasAttribute("data-youtube-id")}loadYoutubeThumbnailUrl(e){return"https://img.youtube.com/vi/"+e+"/maxresdefault.jpg"}isVimeoPlayer(e){return e.hasAttribute("data-vimeo-id")}isDailymotionPlayer(e){return e.hasAttribute("data-dailymotion-id")}ie(){var e,t,i,s,o;return t=!1,s={5.5:"5.5",5.6:"6",5.7:"7",5.8:"8",9:"9",10:"10"},void 0!==(o=new Function("/*@cc_on return @_jscript_version; @*/")())&&(t=!0,i=s[o]),e={isTheBrowser:t,actualVersion:i},t||window.navigator.userAgent.indexOf("Trident/7.0")>0&&!/x64|x32/gi.test(window.navigator.userAgent)&&(e={isTheBrowser:!0,actualVersion:"11"}),e}isMobile(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i))}merge_objects(e,t){var i={};for(var s in e)i[s]=e[s];for(var s in t)i[s]=t[s];return i}addEventListener(e,t,i){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i)}};
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */var o=class{constructor(e,t="afterglow"){return this.init(e,t)}init(e,t="afterglow"){if(void 0==e)console.error("Please provide a proper video element to afterglow");else{this.videoelement=e,this.options={},this.skin=t,this.setDefaultOptions(),this.setSkinControls();let i=new s;i.isYoutubePlayer(this.videoelement)&&this.setYoutubeOptions(),i.isVimeoPlayer(this.videoelement)&&this.setVimeoOptions()}}setDefaultOptions(){this.options.controls=!0,this.options.techOrder=["Html5"],this.options.preload=this.getPlayerAttributeFromVideoElement("preload","auto"),this.options.autoplay=this.getPlayerAttributeFromVideoElement("autoplay"),this.options.poster=this.getPlayerAttributeFromVideoElement("poster")}getPlayerAttributeFromVideoElement(e,t=!1){return null!==this.videoelement.getAttribute("data-"+e)?this.videoelement.getAttribute("data-"+e):null!==this.videoelement.getAttribute(e)?this.videoelement.getAttribute(e):t}setSkinControls(){this.options.controlBar={children:[{name:"currentTimeDisplay"},{name:"playToggle"},{name:"durationDisplay"},{name:"progressControl"},{name:"ResolutionSwitchingButton"},{name:"volumeMenuButton",inline:!0},{name:"subtitlesButton"},{name:"captionsButton"}]}}setYoutubeOptions(){this.options.showinfo=0,this.options.techOrder=["youtube"],this.options.sources=[{type:"video/youtube",src:"https://www.youtube.com/watch?v="+this.getPlayerAttributeFromVideoElement("youtube-id")}];let e=new s;e.ie().actualVersion>=8&&e.ie().actualVersion<=11?this.options.youtube={ytControls:2,color:"white",modestbranding:1}:this.options.youtube={iv_load_policy:3,modestbranding:1}}setVimeoOptions(){this.options.techOrder=["vimeo"],this.options.sources=[{type:"video/vimeo",src:"https://vimeo.com/"+this.getPlayerAttributeFromVideoElement("vimeo-id")}]}getSkinClass(){var e="vjs-afterglow-skin";return"afterglow"!==this.skin&&(e+=" afterglow-skin-"+this.skin),9==(new s).ie().actualVersion&&(e+=" ie9-is-bad"),e}};
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */var r=class{constructor(e){this.setup(e)}setup(e){this.videoelement=e,this.id=e.getAttribute("id"),this.config=new o(e,this.getSkinName()),this.util=new s,this.prepareVideoElement(),this.alive=!0}prepareVideoElement(){this.applyDefaultClasses(),this.applyParameters(),this.util.isYoutubePlayer(this.videoelement)?this.applyYoutubeClasses():this.util.isVimeoPlayer(this.videoelement)&&this.applyVimeoClasses()}init(e){let t=this.videoelement.node,i=this.config.options;var s=window.videojs(t,i).ready(function(){if(this.hotkeys({enableFullscreen:!0,enableNumbers:!1,enableVolumeScroll:!1}),null!==t.getAttribute("data-volume")){var i=parseFloat(t.getAttribute("data-volume"));this.volume(i)}this.addChild("TopControlBar"),this.on("play",()=>{window.afterglow.eventbus.dispatch(this.id(),"play");for(let e in window.videojs.getPlayers())null!==window.videojs.getPlayers()[e]&&window.videojs.getPlayers()[e].id_!==this.id_&&window.videojs.getPlayers()[e].pause();if(this.el_.classList.contains("vjs-youtube-headstart")){let e=this.el_;setTimeout(function(){e.classList.remove("vjs-youtube-headstart")},3e3)}}),this.on("pause",()=>{window.afterglow.eventbus.dispatch(this.id(),"paused")}),this.on("ended",()=>{window.afterglow.eventbus.dispatch(this.id(),"ended")}),this.on("volumechange",()=>{window.afterglow.eventbus.dispatch(this.id(),"volume-changed")}),this.on("fullscreenchange",()=>{this.isFullscreen()?window.afterglow.eventbus.dispatch(this.id(),"fullscreen-entered"):window.afterglow.eventbus.dispatch(this.id(),"fullscreen-left"),window.afterglow.eventbus.dispatch(this.id(),"fullscreen-changed")}),"function"==typeof e&&e(this),window.afterglow.eventbus.dispatch(this.id(),"ready"),this.on("autoplay",()=>{window.afterglow.eventbus.dispatch(this.id(),"play")})});this.videojs=s}applyDefaultClasses(){this.videoelement.addClass("video-js"),this.videoelement.addClass("afterglow"),this.config.getSkinClass().split(" ").forEach(e=>{this.videoelement.addClass(e)}),this.videoelement.removeClass("sublime");let e=this.util.ie().actualVersion;e>=8&&e<=11&&this.videoelement.addClass("vjs-IE")}applyParameters(){if("false"==this.videoelement.getAttribute("data-overscale")&&this.videoelement.setAttribute("data-maxwidth",this.videoelement.getAttribute("width")),"none"!=this.videoelement.getAttribute("data-autoresize")&&"false"!=this.videoelement.getAttribute("data-autoresize")){this.videoelement.addClass("vjs-responsive");let e=this.calculateRatio();this.videoelement.node.style.paddingTop=100*e+"%",this.videoelement.removeAttribute("height"),this.videoelement.removeAttribute("width"),this.videoelement.setAttribute("data-ratio",e)}}applyYoutubeClasses(){this.videoelement.addClass("vjs-youtube"),this.videoelement.addClass("vjs-youtube-headstart"),document.querySelector("video").controls&&this.videoelement.addClass("vjs-using-native-controls"),/iPad|iPhone|iPod|iOS/.test(navigator.platform)&&this.videoelement.addClass("vjs-iOS");let e=this.util.ie().actualVersion;e>=8&&e<=11&&this.videoelement.addClass("vjs-using-native-controls")}applyVimeoClasses(){this.videoelement.addClass("vjs-vimeo")}calculateRatio(){if(this.videoelement.getAttribute("data-ratio"))var e=this.videoelement.getAttribute("data-ratio");else{if(!this.videoelement.getAttribute("height")||!this.videoelement.getAttribute("width"))return console.error("Please provide witdh and height for your video element."),0;e=this.videoelement.getAttribute("height")/this.videoelement.getAttribute("width")}return parseFloat(e)}getSkinName(){return this.videoelement.getAttribute("data-skin")?this.videoelement.getAttribute("data-skin"):"afterglow"}destroy(){this.videojs.paused()||this.videojs.pause(),this.videojs.isFullscreen()&&this.videojs.exitFullscreen(),this.videojs.dispose(),this.alive=!1}getPlayer(){return this.videojs}};var n=class{constructor(e){this.node=e}addClass(e){return this.node.classList?this.node.classList.add(e):this.hasClass(e)||(this.node.className+=" "+e),this}removeClass(e){if(this.node.classList)this.node.classList.remove(e);else{var t=this.node.className.split(" ");t.splice(t.indexOf(e),1),this.node.className=t.join(" ")}return this}hasClass(e){return this.node.classList?this.node.classList.contains(e):-1<this.node.className.indexOf(e)}bind(e,t){for(var i=e.split(" "),s=0,o=i.length;s<o;s++)this.node.addEventListener?this.node.addEventListener(i[s],t,!1):this.node.attachEvent&&this.node.attachEvent("on"+i[s],t);return this}unbind(e,t){for(var i=e.split(" "),s=0,o=i.length;s<o;s++)this.node.removeEventListener&&this.node.removeEventListener(i[s],t,!1),this.node.detachEvent&&this.node.detachEvent("on"+i[s],t);return this}appendDomElement(e,t){this[t]=e,this.appendChild(e.node)}getAttribute(e){return this.node.getAttribute(e)}setAttribute(e,t){return this.node.setAttribute(e,t)}hasAttribute(e){return this.node.hasAttribute(e)}removeAttribute(e){return this.node.removeAttribute(e)}cloneNode(e=!1){return this.node.cloneNode(e)}appendChild(e){this.node.appendChild(e)}},l=i(0),a=i.n(l);var h=
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */
class extends n{constructor(){super(document.createElement("div")),this.addClass("afterglow-lightbox-wrapper"),this.build(),this.bindEmitter()}build(){let e=this.buildCover(),t=this.buildLightbox();this.appendDomElement(e,"cover"),this.appendDomElement(t,"lightbox")}buildCover(){var e=document.createElement("div");return(e=new n(e)).addClass("cover"),e}buildLightbox(){var e=document.createElement("div");return(e=new n(e)).addClass("afterglow-lightbox"),e}bindEmitter(){a()(this)}passVideoElement(e){this.playerid=e.getAttribute("id"),e=new n(e),this.lightbox.appendDomElement(e,"videoelement"),this.lightbox.videoelement=e,this.lightbox.videoelement.setAttribute("autoplay","autoplay"),this.player=new r(this.lightbox.videoelement)}launch(e){var t=new s;document.body.appendChild(this.node),this.player.init(()=>{t.isMobile()||this.player.videojs.paused()&&(this.player.videojs.posterImage.show(),this.player.videojs.bigPlayButton.show()),"true"==this.lightbox.videoelement.getAttribute("data-autoclose")?this.player.videojs.on("ended",()=>{this.close()}):this.player.videojs.on("ended",()=>{this.player.videojs.posterImage.show()}),this.player.videojs.getChild("TopControlBar").addChild("LightboxCloseButton")});for(let e in window.videojs.getPlayers())null!==window.videojs.getPlayers()[e]&&window.videojs.getPlayers()[e].id_!==this.playerid&&window.videojs.getPlayers()[e].pause();this.resize(),t.addEventListener(window,"resize",()=>{this.resize()}),this.cover.bind("click",()=>{this.close()}),t.addEventListener(window,"keyup",e=>{27==e.keyCode&&this.close()}),"function"==typeof e&&e(this)}resize(){if(void 0!==this.lightbox.videoelement){var e=this.lightbox.videoelement.getAttribute("data-ratio");if("false"==this.lightbox.videoelement.getAttribute("data-overscale"))var t=this.calculateLightboxSizes(e,parseInt(this.lightbox.videoelement.getAttribute("data-maxwidth")));else t=this.calculateLightboxSizes(e)}else 1==document.querySelectorAll("div.afterglow-lightbox-wrapper .vjs-youtube").length&&(e=document.querySelector("div.afterglow-lightbox-wrapper .vjs-youtube").getAttribute("data-ratio"),t=this.calculateLightboxSizes(e));this.node.style.width=t.width,this.node.style.height=t.height,this.lightbox.node.style.height=t.playerheight+"px",this.lightbox.node.style.width=t.playerwidth+"px",this.lightbox.node.style.top=t.playeroffsettop+"px",this.lightbox.node.style.left=t.playeroffsetleft+"px"}calculateLightboxSizes(e,t){var i={};return i.width=window.clientWidth||document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth,i.height=window.clientHeight||document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight,i.height/i.width>e?(void 0!==t&&t<.9*i.width?i.playerwidth=t:i.playerwidth=.9*i.width,i.playerheight=i.playerwidth*e):(void 0!==t&&t<.92*i.height/e?i.playerheight=t*e:i.playerheight=.92*i.height,i.playerwidth=i.playerheight/e),i.playeroffsettop=(i.height-i.playerheight)/2,i.playeroffsetleft=(i.width-i.playerwidth)/2,i}close(){window.afterglow.eventbus.dispatch(this.player.id,"before-lightbox-close"),this.player.destroy(!0),this.node.parentNode.removeChild(this.node),this.emit("close")}getPlayer(){if(void 0!==this.player)return this.player.getPlayer()}};
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */var d=class extends n{constructor(e){super(e),this.init()}init(){this.playerid=this.node.getAttribute("href").replace("#","");let e=document.querySelector("#"+this.playerid);this.videoelement=new n(e),this.prepare(),a()(this)}prepare(){this.videoelement.addClass("afterglow-lightboxplayer"),this.videoelement.setAttribute("data-autoresize","fit"),this.bind("click",e=>{e.preventDefault(),this.trigger()})}trigger(){this.lightbox=new h;var e=this.videoelement.cloneNode(!0);this.lightbox.passVideoElement(e),this.emit("trigger"),window.afterglow.eventbus.dispatch(this.playerid,"lightbox-launched"),this.lightbox.launch(),this.lightbox.on("close",()=>{window.afterglow.eventbus.dispatch(this.playerid,"lightbox-closed"),this.emit("close")})}closeLightbox(){void 0!=this.lightbox&&(this.lightbox.close(),this.deleteLightbox())}deleteLightbox(){void 0!=this.lightbox&&delete this.lightbox}getPlayer(){if(void 0!==this.lightbox)return this.lightbox.getPlayer()}};
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */var u=class{constructor(){this.players={}}subscribe(e,t,i){this.players[e]||(this.players[e]={listeners:{}}),this.players[e].listeners[t]||(this.players[e].listeners[t]=[]),this.players[e].listeners[t].push(i)}unsubscribe(e,t,i){if(this.players[e]&&this.players[e].listeners[t]&&-1!==this.players[e].listeners[t].indexOf(i)){let s=this.players[e].listeners[t].indexOf(i);this.players[e].listeners[t].splice(s,1)}else console.error("afterglow could not unbind your event because the _callback was not bound")}dispatch(e,t){if(!this.players[e]||!this.players[e].listeners[t])return!1;for(var i=0;i<this.players[e].listeners[t].length;i++)this.players[e].listeners[t][i]({type:t,playerid:e,player:window.afterglow.getPlayer(e)})}};
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */var p=class{constructor(){this.players=[],this.lightboxtriggers=[],this.eventbus=!1,this.afterinit=[]}init(){this.configureVideoJS(),this.prepareEventbus(),this.initVideoElements(),this.prepareLightboxVideos();for(var e=0;e<this.afterinit.length;e++)this.afterinit[e]();this.afterinit=[]}initVideoElements(){for(var e=document.querySelectorAll("video.afterglow,video.sublime"),t=0;t<e.length;t++){let s=new n(e[t]);var i=new r(s);i.init(),this.players.push(i)}}prepareLightboxVideos(){for(var e=document.querySelectorAll("a.afterglow,a.sublime"),t=0;t<e.length;t++){let i=new d(e[t]);this.bindLightboxTriggerEvents(i),this.lightboxtriggers.push(i)}}prepareEventbus(){this.eventbus=!1,this.eventbus=new u}on(e,t,i){this.eventbus?this.eventbus.subscribe(e,t,i):this.afterinit.push(()=>{this.on(e,t,i)})}off(e,t,i){this.eventbus?this.eventbus.unsubscribe(e,t,i):this.afterinit.push(()=>{this.off(e,t,i)})}bindLightboxTriggerEvents(e){e.on("trigger",()=>{this.consolidatePlayers}),e.on("close",()=>{this.consolidatePlayers()})}play(e){for(var t=this.players.length-1;t>=0;t--)this.players[t].id===e&&this.players[t].getPlayer().play();for(t=this.lightboxtriggers.length-1;t>=0;t--)this.lightboxtriggers[t].playerid===e&&this.lightboxtriggers[t].trigger()}getPlayer(e){for(var t=this.players.length-1;t>=0;t--)if(this.players[t].id===e)return this.players[t].getPlayer();for(t=this.lightboxtriggers.length-1;t>=0;t--)if(this.lightboxtriggers[t].playerid===e)return this.lightboxtriggers[t].getPlayer();return!1}destroyPlayer(e){for(var t=this.players.length-1;t>=0;t--)if(this.players[t].id===e)return this.players[t].destroy(),this.players.splice(t,1),!0;for(t=this.lightboxtriggers.length-1;t>=0;t--)if(this.lightboxtriggers[t].playerid===e)return this.closeLightbox(),!0;return!1}closeLightbox(){for(var e=this.lightboxtriggers.length-1;e>=0;e--)this.lightboxtriggers[e].closeLightbox();this.consolidatePlayers()}consolidatePlayers(){for(var e=this.players.length-1;e>=0;e--)void 0===this.players[e]||this.players[e].alive||(delete this.players[e],this.players=this.players.filter(()=>!0))}configureVideoJS(){window.HELP_IMPROVE_VIDEOJS=!1}};
/**
 * afterglow - An easy to integrate HTML5 video player with lightbox support.
 * @link http://afterglowplayer.com
 * @license MIT
 */window.afterglow=new p,document.addEventListener("DOMContentLoaded",function(){window.afterglow.init()})}]);